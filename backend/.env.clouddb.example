# Hybrid（本地代码 + 云端数据库）

# -------------------- Database --------------------
# 云端 PostgreSQL（示例：不要提交真实值）
DATABASE_URL=postgresql+psycopg2://<user>:<password>@<host>:5432/<db>?sslmode=require

# -------------------- Storage --------------------
# 默认建议 local，避免污染云端；如需与线上一致可改成 azure 并填入连接信息
STORAGE_TYPE=local

# 若使用 Azure Blob 存储：
# STORAGE_TYPE=azure
# AZURE_STORAGE_CONNECTION_STRING=<conn-string>
# AZURE_STORAGE_ACCOUNT_NAME=<account>
# AZURE_STORAGE_ACCOUNT_KEY=<key>
# AZURE_STORAGE_BLOB_ENDPOINT=https://<account>.blob.core.windows.net/
# AZURE_STORAGE_UPLOADS_CONTAINER=uploads
# AZURE_STORAGE_EXPORTS_CONTAINER=exports
# AZURE_STORAGE_CHARTS_CONTAINER=charts

# -------------------- Azure OpenAI (required, Responses API) --------------------
AZURE_OPENAI_API_KEY=<your-key>
AZURE_OPENAI_RESPONSES_URL=https://<your-resource>.openai.azure.com/openai/v1/responses

# 可选：第二资源（故障切换，仅对可恢复错误：timeout/network/429/5xx）
AZURE_OPENAI_API_KEY_2=<your-key-2>
AZURE_OPENAI_RESPONSES_URL_2=https://<your-resource-2>.openai.azure.com/openai/v1/responses

# 模型（deployment name）
PARSING_MODEL=o4-mini
ANALYSIS_MODEL=gpt-4.1-nano

# 可选：第二资源上的模型名
PARSING_MODEL_2=
ANALYSIS_MODEL_2=

# 超时与重试
OPENAI_REQUEST_TIMEOUT_SECONDS=600
OPENAI_REQUEST_MAX_RETRIES=2
OPENAI_REQUEST_RETRY_BACKOFF_SECONDS=0.8
OPENAI_REQUEST_RETRY_MAX_BACKOFF_SECONDS=8.0

# 推理模型参数（o4-mini 等 reasoning 模型不支持 temperature）
PARSING_REASONING_EFFORT=high

# 分析模型可用 temperature
ANALYSIS_TEMPERATURE=0.5

# Legacy（可选兼容）：若不设置 AZURE_OPENAI_RESPONSES_URL，则会根据 endpoint 推导。
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_API_VERSION=
AZURE_OPENAI_DEPLOYMENT_NAME=

# -------------------- Optional --------------------
DEBUG=false

# -------------------- Email (Stage-1 auth) --------------------
# dev | acs | disabled
EMAIL_PROVIDER=dev
EMAIL_LOG_CODES_IN_DEV=true

# ACS Email (required when EMAIL_PROVIDER=acs)
ACS_EMAIL_CONNECTION_STRING=<your-acs-connection-string>
ACS_EMAIL_SENDER=no-reply@<primary-domain>
