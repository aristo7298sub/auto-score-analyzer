# AIæˆç»©åˆ†æå¹³å°

åŸºäº Azure OpenAI çš„æ™ºèƒ½å­¦ç”Ÿæˆç»©åˆ†æç³»ç»Ÿï¼Œæ”¯æŒ Excel/Word/PPT æ–‡ä»¶ä¸Šä¼ ã€AI æ™ºèƒ½åˆ†æã€ä¸ªæ€§åŒ–å»ºè®®ç”Ÿæˆå’ŒæŠ¥å‘Šå¯¼å‡ºã€‚

## ğŸŒ ç¯å¢ƒæ¨¡å¼ï¼ˆåŒä¸€å¥—ä»£ç ï¼Œé ç¯å¢ƒå˜é‡åˆ‡æ¢ï¼‰

æœ¬ä»“åº“é•¿æœŸç»´æŠ¤ä¸‰ç§è¿è¡Œæ–¹å¼ï¼š

- **A. Local-Allï¼ˆçº¯æœ¬åœ°ï¼Œé™¤ Azure OpenAI å¤–ï¼‰**ï¼šæœ¬åœ° SQLite + æœ¬åœ°æ–‡ä»¶å­˜å‚¨
- **B. Hybridï¼ˆæœ¬åœ°ä»£ç  + äº‘ç«¯æ•°æ®åº“ï¼‰**ï¼šæœ¬åœ°è·‘å‰åç«¯ï¼Œæ•°æ®åº“ï¼ˆä»¥åŠå¯é€‰çš„æ–‡ä»¶å­˜å‚¨ï¼‰èµ°äº‘ç«¯
- **C. Cloud-Allï¼ˆçº¯äº‘ç«¯ï¼‰**ï¼šAzure Container Appsï¼ˆç”Ÿäº§/æ¼”ç¤ºï¼‰

è¯¦ç»†è¯´æ˜ä¸å‘å¸ƒæ¨¡æ¿è§ï¼š
- [docs/README.md](docs/README.md)
- [docs/guides/environments.md](docs/guides/environments.md)
- [docs/guides/local-development.md](docs/guides/local-development.md)

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¯ æˆç»©åˆ†æ
- **å¤šæ ¼å¼æ”¯æŒ**: æ”¯æŒ .xlsx, .docx, .pptx æ ¼å¼æ–‡ä»¶
- **æ™ºèƒ½è§£æ**: è‡ªåŠ¨è¯†åˆ«å­¦ç”Ÿå§“åã€æ€»åˆ†å’Œæ‰£åˆ†é¡¹
- **æ‰¹é‡åˆ†æ**: å¹¶å‘å¤„ç†å¤šä¸ªå­¦ç”Ÿæˆç»©,æœ€é«˜æ”¯æŒ50å¹¶å‘
- **AIå»ºè®®**: åŸºäºAzure OpenAI GPT-4ç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ å»ºè®®

### ğŸ‘¤ ç”¨æˆ·ç³»ç»Ÿ
- **è´¦æˆ·ç®¡ç†**: æ³¨å†Œ/ç™»å½•/ç™»å‡º
- **é…é¢ç³»ç»Ÿ**: åŸºäºé…é¢çš„ä½¿ç”¨è®¡è´¹(1å­¦ç”Ÿ=1é…é¢)
- **VIPç‰¹æƒ**: VIPç”¨æˆ·æ— é™é…é¢
- **æ¨èå¥–åŠ±**: æ¨èæ–°ç”¨æˆ·è·å¾—é…é¢å¥–åŠ±

### ğŸ“Š ç®¡ç†åå°
- **ç”¨æˆ·ç®¡ç†**: VIPè®¾ç½®ã€è´¦æˆ·å¯ç”¨/ç¦ç”¨ã€é…é¢å……å€¼
- **æ•°æ®ç»Ÿè®¡**: å®æ—¶ç”¨æˆ·æ•°ã€åˆ†ææ€»æ•°ã€é…é¢æ¶ˆè€—ç»Ÿè®¡
- **åˆ†ææ—¥å¿—**: æŸ¥çœ‹æ‰€æœ‰åˆ†æè®°å½•å’ŒçŠ¶æ€
- **éšè—è®¿é—®**: ä»…é€šè¿‡ `/admin` è·¯å¾„è®¿é—®,ä¸åœ¨å¯¼èˆªæ˜¾ç¤º

### ğŸ¨ UI/UX
- **è«å…°è¿ªé…è‰²**: æŸ”å’Œèˆ’é€‚çš„æ•™è‚²ä¸»é¢˜è‰²è°ƒ
- **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **å›½é™…åŒ–**: ä¸­è‹±æ–‡åˆ‡æ¢æ”¯æŒ
- **ä¸»é¢˜åˆ‡æ¢**: æ˜æš—ä¸»é¢˜åˆ‡æ¢

### ğŸ“¥ å¯¼å‡ºåŠŸèƒ½
- **Excelå¯¼å‡º**: åŒ…å«è¯¦ç»†åˆ†ææ•°æ®çš„Excelè¡¨æ ¼
- **Wordå¯¼å‡º**: æ ¼å¼åŒ–çš„åˆ†ææŠ¥å‘Šæ–‡æ¡£

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js 18+
- Python 3.11+
- Azure OpenAI API è®¿é—®æƒé™

### æœ¬åœ°å¼€å‘

#### 1. å…‹éš†ä»“åº“

```bash
git clone https://github.com/aristo7298sub/auto-score-analyzer.git
cd auto-score-analyzer
```

#### 2. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `backend/.env` æ–‡ä»¶ï¼ˆä¸è¦æäº¤åˆ° GitHubï¼‰ï¼š

- Local-Allï¼šå‚è€ƒæ¨¡æ¿ `backend/.env.local.example`
- Hybridï¼šå‚è€ƒæ¨¡æ¿ `backend/.env.clouddb.example`

```env
# Azure OpenAI é…ç½®ï¼ˆå¿…å¡«ï¼‰
AZURE_OPENAI_API_KEY=your-api-key

# æ¨èï¼ˆæ–°æ¶æ„ï¼‰ï¼šResponses API + æ¨¡å‹åˆ†ç¦»
# - ç›´æ¥ä½¿ç”¨ /openai/v1/responses
# - `PARSING_MODEL` / `ANALYSIS_MODEL` å¡«å†™ Azure OpenAI çš„éƒ¨ç½²åï¼ˆdeployment nameï¼‰
AZURE_OPENAI_RESPONSES_URL=https://your-resource.openai.azure.com/openai/v1/responses
PARSING_MODEL=o4-mini
PARSING_REASONING_EFFORT=high
ANALYSIS_MODEL=gpt-4.1-nano
ANALYSIS_TEMPERATURE=0.5

# æ•°æ®åº“
# Local-All ç¤ºä¾‹ï¼š
DATABASE_URL=sqlite:///./data/score_analyzer.db
# Hybrid ç¤ºä¾‹ï¼š
# DATABASE_URL=postgresql+psycopg2://USER:PASSWORD@HOST:5432/DBNAME

# å­˜å‚¨é…ç½®(æœ¬åœ°å¼€å‘ä½¿ç”¨local)
STORAGE_TYPE=local

# åº”ç”¨é…ç½®
DEBUG=True
HOST=0.0.0.0
PORT=8000
BACKEND_URL=http://localhost:8000
# é€—å·åˆ†éš”ï¼š"http://localhost:3000,http://localhost:5173"
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
LOG_LEVEL=INFO
```

#### 3. å¯åŠ¨åç«¯

```bash
cd backend
pip install -r requirements.txt
python run.py
```

åç«¯è¿è¡Œåœ¨ http://localhost:8000
APIæ–‡æ¡£: http://localhost:8000/docs

#### 4. å¯åŠ¨å‰ç«¯

```bash
cd frontend
npm install
npm run dev
```

å‰ç«¯è¿è¡Œç«¯å£ä»¥ Vite è¾“å‡ºä¸ºå‡†ï¼ˆé»˜è®¤é…ç½®ä¸º http://localhost:3000ï¼‰ã€‚

#### 5. è®¾ç½®ç®¡ç†å‘˜ï¼ˆå¯é€‰ï¼‰

ç®¡ç†å‘˜æƒé™éœ€è¦åœ¨æ•°æ®åº“ä¸­å°†ç”¨æˆ·çš„ `is_admin` è®¾ç½®ä¸º `true`ï¼Œè¯¦è§ [docs/reference/admin-guide.md](docs/reference/admin-guide.md)ã€‚


### ç”Ÿäº§éƒ¨ç½²

ç”Ÿäº§/æ¼”ç¤ºç¯å¢ƒä½¿ç”¨ Azure Container Appsï¼ˆä¸å†ä½¿ç”¨ Azure VMï¼‰ã€‚

- éƒ¨ç½²ï¼šè§ [docs/guides/container-apps-deployment.md](docs/guides/container-apps-deployment.md)
- è‡ªå®šä¹‰åŸŸåï¼šè§ [docs/guides/domain-setup.md](docs/guides/domain-setup.md)

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
auto-score-analyzer/
â”œâ”€â”€ backend/          # Python FastAPI åç«¯
â”œâ”€â”€ frontend/         # React + TypeScript + Vite å‰ç«¯
â”œâ”€â”€ docs/             # é¡¹ç›®æ–‡æ¡£ï¼ˆå…¥å£è§ docs/README.mdï¼‰
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ README.md
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**: FastAPI 0.104+
- **æ•°æ®åº“**: SQLite (å¼€å‘) / PostgreSQL (ç”Ÿäº§å¯é€‰)
- **ORM**: SQLAlchemy
- **è®¤è¯**: JWT + bcrypt
- **AI**: Azure OpenAI GPT-4
- **æ–‡ä»¶å¤„ç†**: pandas, python-docx, python-pptx
- **å­˜å‚¨**: æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ / Azure Blob Storage

### å‰ç«¯
- **æ¡†æ¶**: React 18 + TypeScript
- **æ„å»ºå·¥å…·**: Vite 5
- **UIç»„ä»¶**: Ant Design 5
- **çŠ¶æ€ç®¡ç†**: Zustand
- **HTTPå®¢æˆ·ç«¯**: Axios
- **å›½é™…åŒ–**: react-i18next
- **è·¯ç”±**: React Router 6

## ğŸ“ APIæ–‡æ¡£

å¯åŠ¨åç«¯åè®¿é—®:
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

### ä¸»è¦æ¥å£

#### è®¤è¯
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/email/send-verification-code` - å‘é€æ³¨å†Œé‚®ç®±éªŒè¯ç ï¼ˆç»Ÿä¸€æç¤ºï¼Œä¸æš´éœ²é‚®ç®±æ˜¯å¦å­˜åœ¨ï¼‰
- `POST /api/auth/password/reset/request` - å‘èµ·é‡ç½®å¯†ç ï¼ˆç»Ÿä¸€æç¤ºï¼Œä¸æš´éœ²é‚®ç®±æ˜¯å¦å­˜åœ¨ï¼‰
- `POST /api/auth/password/reset/confirm` - ä½¿ç”¨éªŒè¯ç é‡ç½®å¯†ç 
- `POST /api/auth/email/bind/request` - ç™»å½•åç»‘å®šé‚®ç®±ï¼šå‘é€ç»‘å®šéªŒè¯ç 
- `POST /api/auth/email/bind/confirm` - ç™»å½•åç»‘å®šé‚®ç®±ï¼šç¡®è®¤ç»‘å®š
- `GET /api/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

è¯´æ˜ï¼š
- æ³¨å†Œå¿…é¡»æä¾›é‚®ç®±ä¸éªŒè¯ç ï¼ˆå…ˆè°ƒç”¨ `POST /api/auth/email/send-verification-code` è·å–éªŒè¯ç ï¼‰ã€‚
- å½“å‰æ—¥å¸¸ç™»å½•æ–¹å¼ä¸ºï¼šç”¨æˆ·å + å¯†ç ï¼ˆé‚®ç®±ä¸ä½œä¸ºç™»å½•æ ‡è¯†ï¼‰ã€‚

### æœ¬åœ°ç”¨ ACS çœŸå‘é‚®ä»¶éªŒè¯ç ï¼ˆå¯é€‰ï¼Œä½†æ¨èè”è°ƒæ³¨å†Œï¼‰

é»˜è®¤æœ¬åœ° `EMAIL_PROVIDER=dev` ä¼šæŠŠéªŒè¯ç æ‰“å°åˆ°åç«¯æ—¥å¿—ã€‚è‹¥ä½ å¸Œæœ›åœ¨æœ¬åœ°å¼€å‘æ—¶ä¹Ÿèƒ½çœŸæ­£æ”¶åˆ°éªŒè¯ç é‚®ä»¶ï¼š

1) åœ¨ Azure Portal åˆ›å»º **Azure Communication Services** èµ„æºå¹¶å¯ç”¨ **Email** åŠŸèƒ½ã€‚
2) é…ç½®ä¸€ä¸ªå¯ç”¨çš„å‘ä»¶äººåœ°å€ï¼ˆSender/Fromï¼Œéœ€è¦åœ¨ ACS ä¸­éªŒè¯å¯ç”¨ï¼‰ã€‚
3) åœ¨ `backend/.env`ï¼ˆä¸è¦æäº¤åˆ° GitHubï¼‰ä¸­è®¾ç½®ï¼š

```env
EMAIL_PROVIDER=acs
ACS_EMAIL_CONNECTION_STRING=<your-acs-connection-string>
ACS_EMAIL_SENDER=<your-verified-sender-email>
EMAIL_LOG_CODES_IN_DEV=false
```

æ›´è¯¦ç»†æ­¥éª¤è§ [docs/guides/local-development.md](docs/guides/local-development.md)ã€‚

#### æˆç»©åˆ†æ
- `POST /api/upload` - ä¸Šä¼ å¹¶åˆ†ææˆç»©æ–‡ä»¶
- `GET /api/student/{name}` - æŸ¥è¯¢å­¦ç”Ÿæˆç»©
- `POST /api/export/{format}` - å¯¼å‡ºåˆ†ææŠ¥å‘Š

#### é…é¢ç®¡ç†
- `GET /api/quota/balance` - æŸ¥è¯¢é…é¢ä½™é¢
- `GET /api/quota/transactions` - æŸ¥è¯¢é…é¢äº¤æ˜“è®°å½•
- `GET /api/quota/referral/code` - è·å–æ¨èç 
- `GET /api/quota/referral/stats` - æŸ¥è¯¢æ¨èç»Ÿè®¡

#### ç®¡ç†å‘˜
- `GET /api/admin/users` - è·å–ç”¨æˆ·åˆ—è¡¨
- `POST /api/admin/users/set-vip` - è®¾ç½®VIP
- `GET /api/admin/stats` - è·å–ç³»ç»Ÿç»Ÿè®¡
- `GET /api/admin/logs` - è·å–åˆ†ææ—¥å¿—

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- âœ… JWT Token è®¤è¯
- âœ… å¯†ç  bcrypt åŠ å¯†
- âœ… CORS è·¨åŸŸä¿æŠ¤
- âœ… SQLæ³¨å…¥é˜²æŠ¤ (SQLAlchemy ORM)
- âœ… æ–‡ä»¶ç±»å‹éªŒè¯
- âœ… é…é¢é™åˆ¶é˜²æ»¥ç”¨

## ğŸ¯ ä½¿ç”¨æµç¨‹

1. **æ³¨å†Œè´¦æˆ·**: è®¿é—®æ³¨å†Œé¡µé¢åˆ›å»ºè´¦æˆ·(é‚®ç®±å¯é€‰)
2. **è·å–é…é¢**: æ–°ç”¨æˆ·é»˜è®¤10é…é¢,å¯é€šè¿‡æ¨èè·å¾—æ›´å¤š
3. **ä¸Šä¼ æ–‡ä»¶**: æ”¯æŒ Excel/Word/PPT æ ¼å¼çš„æˆç»©æ–‡ä»¶
4. **æ™ºèƒ½åˆ†æ**: ç³»ç»Ÿè‡ªåŠ¨è§£æå¹¶è°ƒç”¨AIç”Ÿæˆä¸ªæ€§åŒ–å»ºè®®
5. **æŸ¥çœ‹ç»“æœ**: å®æ—¶æŸ¥çœ‹åˆ†æç»“æœå’ŒAIå»ºè®®
6. **å¯¼å‡ºæŠ¥å‘Š**: å¯¼å‡ºExcelæˆ–Wordæ ¼å¼çš„åˆ†ææŠ¥å‘Š

## ğŸ§ª å¼€å‘ç›¸å…³

### æ•°æ®åº“è¿ç§»

```bash
cd backend
alembic upgrade head
```

### è®¾ç½®ç®¡ç†å‘˜

è¯¦è§ [docs/reference/admin-guide.md](docs/reference/admin-guide.md)ï¼ˆåŒ…å« SQL ç¤ºä¾‹ï¼‰ã€‚

### è¿è¡Œæµ‹è¯•

```bash
# åç«¯æµ‹è¯•
cd backend
pytest

# å‰ç«¯æµ‹è¯•
cd frontend
npm run test
```

### ä»£ç æ ¼å¼åŒ–

```bash
# åç«¯
cd backend
black .
isort .

# å‰ç«¯
cd frontend
npm run lint
npm run format
```

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ‘¨â€ğŸ’» ä½œè€…

aristo7298sub

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request!

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®,è¯·é€šè¿‡ GitHub Issues è”ç³»ã€‚
